# 新功能测试说明

## 功能概述

本次更新添加了两个新功能：

### 1. 批量复制卡密功能
在卡片列表页面，可以批量选择卡片并直接复制它们的卡密（card_id）。

### 2. 根据额度查询卡密信息功能
在查询激活页面，可以输入额度值，查询所有匹配该额度的卡片信息。

---

## 测试步骤

### 功能1：批量复制卡密

1. **访问系统**
   - 打开浏览器访问：`http://localhost:8001`
   - 登录系统（或使用访客模式）

2. **进入卡片列表页面**
   - 点击左侧菜单的"卡片列表"

3. **选择卡片**
   - 勾选一个或多个卡片的复选框
   - 或点击"一键选中已激活未使用"按钮快速选择

4. **复制卡密**
   - 在批量操作栏中，点击"批量复制卡密"按钮（蓝色按钮）
   - 系统会将选中的所有卡密复制到剪贴板，每行一个

5. **验证结果**
   - 打开记事本或其他文本编辑器
   - 粘贴（Ctrl+V）查看复制的卡密
   - 格式应该是：
     ```
     mio-xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
     mio-xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
     mio-xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
     ```

### 功能2：根据额度查询卡密

1. **访问系统**
   - 打开浏览器访问：`http://localhost:8001`
   - 登录系统

2. **进入卡片列表页面**
   - 点击左侧菜单的"卡片列表"

3. **根据额度筛选**
   - 在筛选栏中找到"筛选额度"输入框
   - 输入要筛选的额度值（例如：1, 2, 5）
   - 点击"搜索"按钮

4. **查看结果**
   - 系统会在卡片列表中只显示匹配该额度的卡片
   - 可以结合其他筛选条件（状态、退款状态、使用状态）进行组合筛选

5. **批量操作**
   - 选中筛选出的卡片
   - 可以使用"批量复制卡密"等批量操作功能

6. **清除筛选**
   - 清空"筛选额度"输入框
   - 点击"搜索"按钮恢复显示所有卡片

---

## API接口测试

### 卡片列表筛选

**功能：**
- 在卡片列表页面通过额度输入框进行前端筛选
- 支持与其他筛选条件组合使用
- 实时筛选，无需额外API请求

---

## 注意事项

1. **批量复制卡密功能**
   - 不需要卡片已激活即可复制卡密
   - 只复制卡密（card_id），不复制卡号等敏感信息
   - 与"批量复制"按钮不同，后者复制完整的卡号信息

2. **根据额度筛选功能**
   - 需要登录才能使用（访客模式不可用）
   - 筛选结果不包括已删除的卡片（除非特别选择）
   - 支持小数额度（如 1.5, 2.99）
   - 可以与状态、退款状态、使用状态等条件组合筛选

3. **权限说明**
   - 批量复制卡密：需要登录
   - 根据额度筛选：需要登录
   - 访客模式只能使用"查询激活"功能

---

## 常见问题

**Q: 复制卡密后粘贴没有内容？**
A: 检查浏览器是否允许访问剪贴板，某些浏览器需要用户授权。

**Q: 根据额度筛选没有结果？**
A: 确认数据库中是否有该额度的卡片，检查输入的额度值是否正确（注意小数点）。

**Q: 筛选结果显示的卡片状态不对？**
A: 点击刷新按钮重新加载数据，系统会自动更新过期卡片状态。

---

## 更新日志

**版本：v2.1.0**
- ✅ 新增：批量复制卡密功能
- ✅ 新增：卡片列表页面根据额度筛选功能
- ✅ 优化：筛选条件支持组合使用
- ✅ 优化：筛选界面布局更加紧凑

