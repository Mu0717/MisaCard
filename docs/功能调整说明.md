# 功能调整说明

## 📝 调整内容

根据用户反馈，我们对"根据额度查询"功能的位置进行了调整。

### 调整前
- **位置**：查询激活页面
- **方式**：独立的查询区域，显示查询结果表格
- **操作**：输入额度 → 点击查询 → 查看结果表格 → 复制卡密

### 调整后 ✅
- **位置**：卡片列表页面（筛选栏）
- **方式**：集成到现有筛选功能中
- **操作**：输入额度 → 点击搜索 → 直接在列表中显示筛选结果

---

## 🎯 调整优势

### 1. 更符合用户习惯
- 用户在卡片列表页面就能完成所有筛选操作
- 无需在不同页面之间切换

### 2. 功能更强大
- 支持额度与其他条件组合筛选
  - 额度 + 状态（已激活/未激活/已过期）
  - 额度 + 退款状态（已申请/未申请）
  - 额度 + 使用状态（已使用/未使用）
- 可以对筛选结果直接进行批量操作

### 3. 界面更简洁
- 减少了独立的查询结果展示区域
- 统一的列表展示方式
- 更好的用户体验

### 4. 性能更好
- 前端筛选，无需额外API请求
- 响应速度更快
- 减轻服务器负担

---

## 🔧 技术变更

### 前端变更
1. **移除**：查询激活页面的"根据额度查询卡密"区域
2. **移除**：相关的JavaScript函数（`queryCardsByLimit`、`copyQueryResults`、`copyText`）
3. **新增**：卡片列表页面的"筛选额度"输入框
4. **修改**：`loadCards()` 函数，添加额度筛选逻辑

### 后端变更
- **保留**：`/api/cards/query/by-limit` 接口（备用，未来可能使用）
- 前端采用客户端筛选，暂不调用此接口

---

## 📖 使用方法

### 基础筛选
```
1. 打开卡片列表页面
2. 在"筛选额度"输入框输入额度值（如：1, 2, 5）
3. 点击"搜索"按钮
4. 查看筛选结果
```

### 组合筛选（推荐）
```
1. 输入额度：1
2. 选择状态：已激活
3. 选择使用状态：未使用
4. 点击"搜索"
5. 结果：所有额度为$1、已激活且未使用的卡片
```

### 批量操作
```
1. 使用额度筛选找到目标卡片
2. 勾选需要操作的卡片
3. 使用批量功能：
   - 批量复制卡密
   - 批量复制（卡号信息）
   - 批量激活
   - 批量标记已使用
   - 批量标记退款
   - 批量删除
```

---

## 💡 使用建议

### 场景1：查找特定额度的未使用卡片
```
筛选额度：1
使用状态：未使用
→ 快速找到所有$1且未使用的卡片
```

### 场景2：管理已过期的特定额度卡片
```
筛选额度：2
状态：已过期
退款状态：未申请退款
→ 找到需要申请退款的$2过期卡片
```

### 场景3：批量备份特定额度卡密
```
筛选额度：5
→ 选中所有结果
→ 批量复制卡密
→ 保存到文本文件
```

---

## ⚠️ 注意事项

1. **筛选是前端实现**
   - 首次加载会获取所有卡片
   - 筛选操作在浏览器端完成
   - 速度快，无需等待服务器响应

2. **清除筛选**
   - 清空"筛选额度"输入框
   - 点击"搜索"按钮
   - 恢复显示所有卡片

3. **小数额度**
   - 支持小数输入（如：1.5, 2.99）
   - 精确匹配，不支持范围筛选

4. **组合筛选**
   - 所有筛选条件都是"且"关系
   - 同时满足所有条件的卡片才会显示

---

## 🔄 迁移指南

如果您之前使用"查询激活"页面的额度查询功能，请按以下方式迁移：

### 旧方式
```
查询激活页面 → 根据额度查询卡密 → 输入额度 → 查询 → 复制所有卡密
```

### 新方式
```
卡片列表页面 → 筛选额度 → 输入额度 → 搜索 → 选中卡片 → 批量复制卡密
```

**优势**：新方式支持更多操作，不仅可以复制卡密，还可以进行其他批量操作。

---

## 📊 功能对比

| 特性 | 旧方式（查询激活页面） | 新方式（卡片列表筛选） |
|------|----------------------|---------------------|
| 位置 | 查询激活页面 | 卡片列表页面 |
| 展示方式 | 独立表格 | 集成在列表中 |
| 组合筛选 | ❌ 不支持 | ✅ 支持 |
| 批量操作 | ⚠️ 仅复制卡密 | ✅ 所有批量操作 |
| 性能 | 需要API请求 | 前端筛选，更快 |
| 用户体验 | 需要切换页面 | 统一界面 |

---

## ✅ 总结

这次调整将"根据额度查询"功能从独立页面移到了卡片列表的筛选栏，使其成为整体筛选功能的一部分。这样做不仅简化了界面，还增强了功能，用户可以更灵活地组合多个筛选条件，快速定位目标卡片并进行批量操作。

**推荐使用新方式**，体验更好，功能更强大！

